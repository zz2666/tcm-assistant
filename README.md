# 中医智能小助手 (Traditional Chinese Medicine Assistant)

![TCM Assistant Logo](images/tcm_logo.png)

## 📋 目录 (Contents)

- [产品概述](#产品概述)
- [功能特性](#功能特性)
- [产品设计思路](#产品设计思路)
  - [市场调研与分析](#市场调研与分析)
  - [用户需求解决方案](#用户需求解决方案)
- [技术架构](#技术架构)
- [学习与实践](#学习与实践)
- [用户验证](#用户验证)
- [未来规划](#未来规划)
- [部署指南](#部署指南)

## 产品概述

中医智能小助手是一款融合中医传统理论与现代技术的智能问诊系统，为用户提供专业的中医辨证分析和养生建议。通过模拟中医师的"四诊合参"过程，系统能够进行个性化的中医健康指导，帮助用户更便捷地获取中医服务。

**⚠️ 风险提示：** 本产品仅提供健康参考信息，不替代专业医疗诊断。产品设计考虑到医疗安全性，不开具具体中药处方，仅提供食疗、茶饮等安全可靠的调理方案。如有健康问题，请及时就医。

## 功能特性

### 🧬 体质测试
- 基于中医九种体质理论（平和质、气虚质、阳虚质、阴虚质、痰湿质等）的专业自测问卷
- 分析用户体质类型并提供针对性调理建议
- 体质测试作为智能问诊的辅助入口，增强用户参与度

### 👤 个性化问诊
- 收集用户性别、年龄等基础信息，构建初步用户画像
- 根据不同性别的阴阳特点和年龄段的生理特点，提供差异化分析
- 支持从多维度记录和分析用户健康状况

### 🔍 症状智能筛查
- 常见症状分类快速选择功能，降低用户描述症状的难度
- 支持自然语言描述健康问题，满足92.5%用户线上问诊的便捷需求
- 通过结构化收集症状信息，提高后续辨证准确性

### 🌿 中医辨证分析
- 模拟中医师"望闻问切"四诊法问诊流程，进行有效追问
- 基于知识库提供专业中医辨证分析
- 设计两阶段问诊模式：先追问收集信息，再给出综合分析
- 遵循"八纲辨证"原则，从阴阳、表里、寒热、虚实等维度进行辨证

### 🍵 多维调理方案
- 提供膏方、茶饮、药膳、理疗等全方位调理建议
- 个性化推荐：年轻用户偏好"食疗+运动"方案，中老年用户关注慢病管理
- 所有建议均基于中医知识库，确保专业性和可靠性

## 产品设计思路

### 市场调研与分析

#### 政策与需求双轮驱动的高速蓝海

**市场空间与增长潜力**
- 规模：2023年中医医疗服务智能化市场规模为109亿元，预计2028年将达869亿元，年复合增长率高达51.4%
- 渗透率：2024年渗透率仅1.4%，存在巨大的增长空间
- 政策支持：国家明确要求2025年三级中医医院智能化应用率达100%，专项财政拨款3.2亿元及设备注册指导原则支持

**竞争格局分析**
- 市场分散度：国内供应商多达1.26万家，前五名市场份额合计仅5.4%，为新进入者提供机会窗口
- 竞品分析：
  - 问止中医（市占率1.5%，"中医大脑"技术领先，已启动上市）：主要依靠构建的中医大脑进行诊断分析，包含体质测试等内容，专家问诊时提供辅助功能
  - 云诊科技/安徽中医药大学智能中医（高校背景，专注舌诊开放平台）：重点关注舌诊部分，缺乏完整的中医问诊功能
  - 大经智慧平台：问诊小程序采用3D形象结合语音引导用户进行诊断，用户体验较好
    
**用户需求分析**
- C端用户画像：
  - 核心人群：25-45岁、已婚有孩的中高学历人群（占比约70%）
  - 潜力群体：老年人及慢病人群
- C端核心需求：
  - 便捷性：92.5%用户选择线上问诊，平均诊疗时间缩短至15分钟
  - 个性化：年轻人偏爱"食疗+运动"方案；中老年人关注慢病管理（糖尿病辨证准确率需达89.7%以上）
  - 信任度：62.3%用户愿意尝试智能问诊，但仅38%完全信任，"答案溯源典籍"是提升信任的关键
  - 支付意愿：主流付费区间为11-60元/次
- B端核心需求：
  - 效率提升：引入系统后，医生开方时间减少，复诊率提高
  - 技术赋能：需要现代技术赋能传统业务，提升服务专业性和竞争力

**战略洞察与产品机会点**
- 市场切入策略：B端先行，C端跟进
  - 优先服务B端机构（医院、药房、康养中心），以"提效、增收"为价值主张
  - 通过B2B2C模式触达用户，降低C端获客与信任成本
- 差异化竞争优势：
  - 避免单一舌诊或问诊的红海竞争，整合多模态数据，构建"四诊合参"技术壁垒
  - 诊断结论关联中医典籍与名医医案，实现"答案溯源"，解决用户信任痛点
- 商业模式创新：
  - 从"单次诊断"延伸至"持续健康管理"，提供长期健康方案
  - 通过订阅制或增值服务变现，提升用户生命周期价值

### 用户需求解决方案

1. **便捷获取中医服务**
   - 问题：传统中医问诊时间长、难以表达症状
   - 解决方案：简洁直观的界面设计与症状快速选择功能
   - 实现效果：降低用户表达门槛，满足92.5%用户线上问诊的便捷需求

2. **个性化健康管理**
   - 问题：标准化建议难以满足不同人群需求
   - 解决方案：基于性别、年龄的差异化分析体系
   - 实现效果：针对年轻人提供食疗+运动方案，针对中老年人提供慢病管理方案

3. **专业性与安全性平衡**
   - 问题：智能诊疗存在医疗风险
   - 解决方案：提供中医辨证分析，但不开具具体药方
   - 实现效果：侧重安全可靠的药膳、茶饮等日常调理方案，避免可能的医疗风险

4. **真实问诊体验**
   - 问题：智能问诊缺乏人情味和信任感
   - 解决方案：两阶段问诊流程与医生头像设计
   - 实现效果：模拟真实中医问诊体验，提升用户信任度（从38%到62.3%）
     
5. **体质测试**
   - 问题：用户不了解自身体质特点
   - 解决方案：专业的九种体质自测问卷
   - 实现效果：帮助用户了解体质特点，获取更精准的健康建议

## 技术架构

### 技术选型理由

1. **Streamlit前端框架**
   - 选择理由：专为数据科学和AI应用设计，支持快速开发与部署
   - 优势：丰富UI组件和实时刷新特性提供流畅用户体验，python代码易上手
   - 应用：实现响应式界面设计，确保多设备兼容性

2. **智谱GLM-4.5V模型**
   - 选择理由：在中文处理和医疗领域表现优异
   - 优势：通过设置低温度参数(0.2)，确保回答的一致性和专业性
   - 应用：模拟中医师思维进行问诊追问和辨证分析

3. **向量数据库与RAG**
   - 选择理由：需要高效准确的知识检索系统支持专业回答
   - 优势：Chroma作为轻量级向量数据库，支持高效相似性搜索
   - 应用：实现检索增强生成技术，确保回答基于可靠中医知识

4. **自定义中医知识库**
   - 选择理由：需要专业中医知识支撑辨证分析
   - 构建依据：基于《中医诊断学》(中医药院校教材)、《黄帝内经》、《伤寒论》和《金匮要略》等中医经典著作
   - 知识体系：遵循"症状→证候→治法"的中医辨证思维路径，融合八纲辨证和四诊合参原则
   - 应用：通过优化的文本分割提高检索精度和相关性

### 系统架构图

```
用户界面(Streamlit)
      ↓
请求处理与会话管理
      ↓
      ↓------------→ 知识检索系统 ←------------- 中医知识库(Chroma)
      ↓                  ↑
      ↓                  ↓
智能引擎(智谱GLM-4.5V)
      ↓
响应格式化与展示
```

## 学习与实践

在开发过程中，为了快速掌握中医辨证的基本逻辑并应用于系统设计，我们采取了以下策略：

### 专业资源研究

1. **经典文献学习**
   - 系统研读《中医诊断学》（中医药院校标准教材）
   - 深入理解《黄帝内经》中的整体观念与体质理论，如"阴阳平衡则健康，失衡则病"
   - 学习《伤寒论》《金匮要略》中的经典辨证论治体系

2. **中医辨证思想实践**
   - 掌握八纲辨证方法：从阴阳、表里、寒热、虚实八个方面辨别疾病性质
   - 理解四诊合参原则：望（观察）、闻（听嗅）、问（询问）、切（脉诊）四法结合
   - 实践"症状→证候→治法"的诊断路径，将症状归纳为证候，再确定治疗方法

### 专家咨询与优化

在2025年10月19日 19:00-21:30，我们咨询了医学博士对系统进行专业评估，获得以下关键改进建议：

1. **问诊内容深化**
   - 增加常见病症库：扩充系统对常见疾病的识别能力
   - 强化病史询问：中医诊断特别重视患者过往病史，这影响辨证分析的全面性
   - 添加异常指标询问：关注患者已知的异常生理指标，如血压、血糖等

2. **个体差异化考量**
   - 性别信息收集与分析：契合中医阴阳理论，男性属阳，女性属阴，诊治方法有所区别
   - 年龄分层处理：结合中医盛衰理论，不同年龄段（少年、青年、中年、老年）生理特点不同

根据这些建议，我们对系统进行了以下改进：
   - 调整提示词模板，引导系统主动询问用户过往病史和异常指标
   - 增加用户基础信息收集环节，获取性别和年龄信息
   - 基于性别和年龄特点，定制差异化的辨证方案和调理建议
   - 扩充常见病症知识库，提高系统识别范围

这些专业优化显著提升了系统的辨证准确性和建议针对性，使智能问诊过程更接近真实中医诊疗体验。

### 安全性考量

考虑到医疗安全风险，系统设计中我们采取了以下策略：
   - 避免提供具体药方剂量和煎熬方法，防止用药安全问题
   - 通过药膳、茶饮等安全方式提供调理建议，降低医疗风险
   - 设置明确的安全边界，提醒用户严重症状需及时就医

## 用户验证

### 模型测试与评估

我们对中医智能小助手进行了严格的三阶段测试，评估其专业性、准确性和用户体验：

**测试概况**：
- **测试时间**：2025年10月17日-20日
- **测试团队**：医学博士1名，普通用户志愿者10名
- **测试范围**：30个专业测试项目，涵盖中医理论知识、辨证案例分析、安全边界测试和用户交互体验

**评估结果**：
| 发展阶段 | 技术特点 | 总加权得分 | 结果级别 |
|---------|---------|-----------|--------|
| 阶段一 | 基础模型+未调优提示词 | 47.3分 | 不及格 |
| 阶段二 | 中医辨证思想调优 | 78.5分 | 良好 |
| 阶段三 | RAG知识库增强 | 91.4分 | 优秀 |

**核心改进发现**：
1. **专业框架引入**：八纲辨证和"症状→证候→治法"的诊断路径显著提升了辨证系统性
2. **知识库支撑**：《中医诊断学》《黄帝内经》《伤寒论》《金匮要略》等经典著作构建的知识库解决了知识深度问题
3. **安全边界设定**：明确的安全指导原则使风险建议下降，安全性提升63.8%

**典型案例改进**：
在肾阳虚案例分析中，最终版本能够提供完整的八纲辨证、系统的病机分析、药方组成原理解析及生活调养建议，体现了中医整体观和辨证论治的专业深度。

这些测试结果证实，知识库增强的RAG模型在专业性和安全性方面达到优秀水平，满足中医智能助手的应用标准。

## 未来规划

基于市场分析和用户反馈，我们的发展规划如下：

1. **无障碍体验升级**
   - 老年人语音输入功能，解决老年用户操作障碍
   - 优化界面和字体大小，提高可访问性

2. **全渠道覆盖**
   - 微信小程序版本开发，提高用户获取便捷性
   - 移动应用与Web版本协同，实现多端数据同步

3. **B端解决方案**
   - 医疗机构专业版，支持聊天记录提取并转化为患者电子档案
   - 患者档案生成与管理系统
   - 医院HIS系统对接，实现数据互通

4. **核心功能拓展**
   - 会话历史记录侧边栏，提供会话记忆性和连续性
   - 个性化健康管理计划，实现从"单次诊断"到"持续健康管理"的转变
   - 药膳茶饮详细制作指导，满足用户深度需求

5. **商业模式优化**
   - 用户偏好问卷调研，收集用户对不同建议的偏好
   - 精准健康产品推荐，向用户推送相关需要的产品
   - 中医药企业合作机会，探索B2B合作模式

## 部署指南

### 环境要求
- Python 3.8+
- Streamlit 1.18+
- 智谱API账号及密钥

### 安装步骤
1. 克隆代码库
```
git clone https://github.com/yourusername/tcm-assistant.git
cd tcm-assistant
```

2. 安装依赖
```
pip install -r requirements.txt
```

3. 配置密钥
```
# 在Streamlit的Secrets中配置
ZHIPUAI_API_KEY=your_api_key_here
```

4. 启动应用
```
streamlit run app.py
```

### 使用流程
1. 填写基本信息(性别和年龄)
2. 选择或输入症状描述
3. 回答追问问题
4. 获取中医辨证分析和养生建议
5. 可选：获取更多调理方案
6. 清除记录
7. 体质测试

---

© 2025 中医智能小助手
